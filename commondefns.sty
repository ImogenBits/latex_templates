\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{commondefns}[2022/09/10 Commonly used packages and macros]
\RequirePackage{xkeyval, etoolbox, xspace}
\xspaceaddexceptions{]\}}

\newcommand{\option}[1]{
    \DeclareOptionX{#1}{
        \expandafter\providecommand\csname #1\endcsname[1]{True}
    }
}
\newcommand{\optionimplies}[3][True]{
    \DeclareOptionX{#2}{
        \expandafter\providecommand\csname #2\endcsname[1]{True}
        \expandafter\providecommand\csname #3\endcsname[1]{#1}
    }
}

\option{notext}
\option{nomath}
\ProcessOptionsX


% general text layout improvements
\ifdefvoid{\notext}{
    \RequirePackage[T1]{fontenc}                % better font encoding
    \RequirePackage{lmodern}                    % font with better glyphs
    \RequirePackage[ngerman, english]{babel}    % better hypenations
    \RequirePackage{parskip, microtype}         % general layout and rendering
}{}

% math symbols
\ifdefvoid{\nomath}{
    \RequirePackage{amsmath, amssymb, mathtools, stmaryrd}
    \newcommand{\mathsc}[1]{\text{\textsc{#1}}}
    \newcommand{\R}{\ensuremath{\mathbb{R}}\xspace}
    \newcommand{\N}{\ensuremath{\mathbb{N}}\xspace}
    \newcommand{\Z}{\ensuremath{\mathbb{Z}}\xspace}
    \newcommand{\Q}{\ensuremath{\mathbb{Q}}\xspace}
}{}
        
        
\RequirePackage{adjustbox}
        
% common pdf and graphics tools
\RequirePackage{graphicx}
\RequirePackage{pdfpages}
\RequirePackage{tikz}
\usetikzlibrary{calc, tikzmark, backgrounds, positioning, arrows, arrows.meta, decorations.markings, scopes}

% better tikz graphs
\tikzset{every picture/.style={thick, >={Latex[round, length=2.5mm, width=2.5mm]}}}
%\tikzset{every path/.style={shorten <= 1pt, shorten >= 1pt}}
\tikzset{every node/.style={circle, fill=black, inner sep=2pt}}

%macros
\newcommand{\A}{\ensuremath{\mathfrak A}}
\newcommand{\B}{\ensuremath{\mathfrak B}}
\newcommand{\I}{\ensuremath{\mathfrak I}}
\newcommand{\Th}{\ensuremath{\mathsf{Th}}}
\newcommand{\FO}{\ensuremath{\mathsf{FO}}}
\newcommand{\Mod}{\ensuremath{\mathsf{Mod}}}
\newcommand{\xor}{\ensuremath{\oplus}}
\newcommand{\impl}{\ensuremath{\rightarrow}}
\newcommand{\TM}{\ensuremath{\mathrm{TM}}\xspace}
\newcommand{\DTM}{\ensuremath{\mathrm{DTM}}\xspace}
\newcommand{\NTM}{\ensuremath{\mathrm{NTM}}\xspace}
\newcommand{\PTM}{\ensuremath{\mathrm{PTM}}\xspace}
\newcommand{\cNP}{\ensuremath{\mathsf{NP}}\xspace}
\newcommand{\cEXP}{\ensuremath{\mathsf{EXP}}\xspace}
\newcommand{\cNEXP}{\ensuremath{\mathsf{NEXP}}\xspace}
\newcommand{\cPSPACE}{\ensuremath{\mathsf{PSPACE}}\xspace}
\newcommand{\cPP}{\ensuremath{\mathsf{PP}}\xspace}
\newcommand{\cP}{\ensuremath{\mathsf{P}}\xspace}
\newcommand{\restr}[2]{\ensuremath{\left.#1\right|_{#2}}}
\newcommand{\expans}[2]{\ensuremath{\left.#1\right|^{#2}}}

% potentially annoying
\let\ophi\phi
\renewcommand{\phi}{\varphi}
\renewcommand{\epsilon}{\varepsilon}
\renewcommand{\P}{\ensuremath{\mathcal P}}
\newcommand{\G}{\ensuremath{\mathcal G}}
\newcommand{\K}{\ensuremath{\mathcal K}}
\newcommand{\f}{\mathfrak}
\renewcommand{\c}{\mathcal}
\renewcommand{\L}{\ensuremath{L}\xspace}
\renewcommand{\O}{\ensuremath{\mathcal{O}}}
\renewcommand{\o}{\ensuremath{\mathcal{o}}}


